(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{Wqy2:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("14J3");var u=l(a("BMrR"));a("jCWc");var d=l(a("kPKH"));a("DZo9");var o=l(a("8z0m"));a("Pwec");var s=l(a("CtXQ")),i=l(a("RIqP")),c=l(a("pVnL"));a("+L6B");var f=l(a("2/Rp"));a("5NDa");var m=l(a("5rEg"));a("miYZ");var h=l(a("tsqr"));a("g9YV");var p=l(a("wCAj"));a("+BJd");var v=l(a("mr32")),E=l(a("lwsE")),g=l(a("W8MJ")),y=l(a("a1gu")),w=l(a("Nsbk")),b=l(a("7W2i"));a("y8nQ");var k=l(a("Vl3Y"));a("OaEy");var x,S,L,R,I=l(a("2fM7")),B=r(a("q1tI")),C=a("MuoO"),O=(a("eO8H"),l(a("zHco"))),F=(l(a("qX+z")),I.default.Option),A=(x=(0,C.connect)(function(e){var t=e.search,a=e.loading;return{search:t,loading:a.models.search}}),S=k.default.create(),x(L=S((R=function(e){function t(){var e,a;(0,E.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,y.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(r))),a.state={fileList:[],loading:!1,totalArticle:0,totalOrigin:0,submitButton:!0,selectedRows:[],formValues:{},word:"",status:"",source:"",total:0,keyword:""},a.columns=[{title:"\u539f\u53e5",dataIndex:"sentence",key:"sentence",width:400,render:function(e){return a.highText(e)}},{title:"\u7cfb\u7edf\u5206\u8bcd",dataIndex:"systemLabel",width:400},{title:"\u8bed\u8a00",dataIndex:"language"},{title:"\u6765\u6e90",dataIndex:"source"},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return a.status[e]}}],a.status=[B.default.createElement(v.default,{color:"lime"},"\u672a\u6807\u6ce8"),B.default.createElement(v.default,{color:"blue"},"\u6807\u6ce8\u4e00\u6b21"),B.default.createElement(v.default,{color:"red"},"\u4ea4\u53c9\u9a8c\u8bc1\u5931\u8d25"),B.default.createElement(v.default,{color:"blue"},"\u6807\u6ce8\u4e09\u6b21"),,B.default.createElement(v.default,{color:"green"},"\u4ea4\u53c9\u9a8c\u8bc1\u6210\u529f"),,,,B.default.createElement(v.default,{color:"red"},"\u5df2\u5220\u9664"),B.default.createElement(v.default,{color:"red"},"\u672a\u8fdb\u884c\u4ea4\u53c9\u9a8c\u8bc1"),B.default.createElement(v.default,{color:"red"},"\u65e0")],a.handleStandardTableChange=function(e){var t=a.state,l=t.word,r=t.status,n=t.source;a.handleFetch(r,n,l,e.current)},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{}})},a.handleSearch=function(e){e.preventDefault();var t=a.props.form;t.validateFields(function(e,t){if(console.log(t),!e){var l=t.status;console.log(l);var r=t.source,n=t.word;a.setState({status:l,source:r,word:n,keyword:n}),a.handleFetch(l,r,n,1)}})},a.expandedRowRender=function(e){var t=e.labelResults,a=[{title:"\u7528\u6237\u6807\u6ce8\u5185\u5bb9",dataIndex:"markContent",key:"markContent",width:600},{title:"\u7528\u6237\u540d",dataIndex:"username",key:"username"},{title:"\u6807\u6ce8\u65f6\u95f4",dataIndex:"markDate",key:"markDate"}];return B.default.createElement(p.default,{columns:a,dataSource:t,rowKey:"markDate",pagination:!1})},a.onSubmitUpload=function(){a.setState({loading:!0});var e=a.state.fileList,t=new FormData;e.forEach(function(e){t.append("file",e)});var l=a.props.dispatch;l({type:"search/upload",payload:t,callback:function(e){a.setState({loading:!1}),0===e.result.err?(0===e.result.totalArticle&&0===e.result.totalOrigin?h.default.warning("\u8be5\u6587\u4ef6\u5728\u8bed\u6599\u5e93\u4e2d\u5df2\u5b58\u5728\uff0c\u8bf7\u4e0a\u4f20\u65b0\u8bed\u6599\uff01"):h.default.success(e.result.info),a.setState({loading:!1,totalArticle:e.result.totalArticle,totalOrigin:e.result.totalOrigin,submitButton:!0})):1===e.result.err&&(h.default.error(e.result.info),a.setState({submitButton:!0}))}})},a}return(0,b.default)(t,e),(0,g.default)(t,[{key:"highText",value:function(e){var t=this.state.keyword,a=new RegExp("("+t+")","g"),l={__html:e.replace(a,"<font style='background:#ff0;'>$1</font>")};return e=B.default.createElement("div",{dangerouslySetInnerHTML:l}),e}},{key:"componentDidMount",value:function(){this.handleFetch(null,null,null,1)}},{key:"handleFetch",value:function(e,t,a,l){var r=this,n=this.props.dispatch,u={status:e,source:t,word:a,current:l};n({type:"search/searchBar",payload:u,callback:function(e){null!==e.result&&(0!==e.result.total&&r.setState({total:e.result.total}),0===e.result.records.length&&h.default.error("\u62b1\u6b49\uff0c\u7cfb\u7edf\u672a\u80fd\u627e\u5230\u76f8\u5173\u7ed3\u679c\uff01"))}})}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:3},wrapperCol:{span:12}};return B.default.createElement(k.default,(0,c.default)({onSubmit:this.handleSearch},t),B.default.createElement(k.default.Item,{label:"\u72b6\u6001"},e("status")(B.default.createElement(I.default,{placeholder:"\u8bf7\u9009\u62e9"},B.default.createElement(F,{value:"0"},"\u672a\u6807\u6ce8"),B.default.createElement(F,{value:"1"},"\u6807\u6ce8\u4e00\u6b21"),B.default.createElement(F,{value:"2"},"\u4ea4\u53c9\u9a8c\u8bc1\u5931\u8d25"),B.default.createElement(F,{value:"3"},"\u6807\u6ce8\u4e09\u6b21"),B.default.createElement(F,{value:"5"},"\u4ea4\u53c9\u9a8c\u8bc1\u6210\u529f"),B.default.createElement(F,{value:"9"},"\u5df2\u5220\u9664"),B.default.createElement(F,{value:"10"},"\u672a\u8fdb\u884c\u4ea4\u53c9\u9a8c\u8bc1")))),B.default.createElement(k.default.Item,{label:"\u6765\u6e90"},e("source",{rules:[{message:"\u8bf7\u9009\u62e9"}]})(B.default.createElement(I.default,{placeholder:"\u8bf7\u9009\u62e9"},B.default.createElement(F,{value:"\u9999\u6e2f\u5f8b\u653f\u53f8"},"\u9999\u6e2f\u5f8b\u653f\u53f8"),B.default.createElement(F,{value:"\u884c\u653f\u957f\u5b982018\u5e74\u65bd\u653f\u62a5\u544a"},"\u884c\u653f\u957f\u5b982018\u5e74\u65bd\u653f\u62a5\u544a"),B.default.createElement(F,{value:"\u660e\u62a5"},"\u660e\u62a5"),B.default.createElement(F,{value:"\u9999\u6e2f\u653f\u5e9c\u4e00\u7ad9\u901a"},"\u9999\u6e2f\u653f\u5e9c\u4e00\u7ad9\u901a"),B.default.createElement(F,{value:"\u653f\u5e9c\u8d26\u76ee\u53ca\u62a5\u544a"},"\u653f\u5e9c\u8d26\u76ee\u53ca\u62a5\u544a"),B.default.createElement(F,{value:"\u9999\u6e2f\u7279\u5225\u884c\u653f\u533a\u653f\u5e9c\u65b0\u95fb\u516c\u62a5"},"\u9999\u6e2f\u7279\u5225\u884c\u653f\u533a\u653f\u5e9c\u65b0\u95fb\u516c\u62a5")))),B.default.createElement(k.default.Item,{label:"\u8bcd\u8bed"},e("word")(B.default.createElement(m.default,{placeholder:"\u8bf7\u8f93\u5165"}))),B.default.createElement("div",{style:{overflow:"hidden"}},B.default.createElement("div",{style:{float:"right",marginBottom:24}},B.default.createElement(f.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),B.default.createElement(f.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.search.searchBarResult,l=t.loading,r=[],c=[];null!=a.result&&(r=a.result.records,c={current:a.result.current,pageSize:a.result.size,total:a.result.total});this.state.selectedRows;var m={name:"file",accept:".xls",onRemove:function(t){e.setState(function(e){var a=e.fileList.indexOf(t),l=e.fileList.slice();return l.splice(a,1),{fileList:l}}),e.setState({totalArticle:0,totalOrigin:0,submitButton:!0})},beforeUpload:function(t){var a=t.name.substr(t.name.length-4),l=t.size/1024/1024<10;return".xls"!==a?(h.default.error("\u8bf7\u4e0a\u4f20 .xls \u7c7b\u578b\u7684\u6587\u4ef6\uff01"),!1):l?(0===e.state.fileList.length?e.setState(function(e){return{fileList:[].concat((0,i.default)(e.fileList),[t]),submitButton:!1}}):(h.default.error("\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6"),e.setState(function(e){return{fileList:(0,i.default)(e.fileList)}})),!1):(h.default.error("\u4e0a\u4f20\u6587\u4ef6\u7684\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc710M!"),!1)},fileList:this.state.fileList};return B.default.createElement(O.default,{title:"\u8bed\u6599\u641c\u7d22"},B.default.createElement(n.default,{bordered:!1,style:{width:"100%"}},B.default.createElement(u.default,null,B.default.createElement(d.default,{span:8},B.default.createElement(o.default,m,B.default.createElement(f.default,null,B.default.createElement(s.default,{type:"upload"})," \u4e0a\u4f20\u8bed\u6599")),B.default.createElement(f.default,{style:{margin:"10px",float:"right",right:"50px"},disabled:this.state.submitButton,type:"primary",onClick:this.onSubmitUpload},this.state.loading?B.default.createElement("div",null,B.default.createElement(s.default,{type:"loading"}),"\xa0\u4e0a\u4f20\u4e2d..."):B.default.createElement("span",null,"\u63d0\u4ea4")),0!==this.state.totalArticle&&0!==this.state.totalOrigin&&0!==this.state.fileList.length?B.default.createElement("div",{style:{fontSize:"15px",lineHeight:"15px",margin:"12px 0 0 12px",color:"#1890ff"}},B.default.createElement("p",null,"\u5df2\u5bfc\u5165\u6587\u7ae0\uff1a",this.state.totalArticle),B.default.createElement("p",null,"\u5df2\u5bfc\u5165\u8bed\u6599\uff1a",this.state.totalOrigin)):""),B.default.createElement(d.default,{span:16},this.renderAdvancedForm())),0!==this.state.total?B.default.createElement("p",{style:{color:"#999999",marginBottom:"5px"}},"\u8bed\u6599\u5e93\u4e3a\u60a8\u627e\u5230",this.state.total,"\u6761\u7ed3\u679c"):"",B.default.createElement(p.default,{columns:this.columns,tableLayout:"auto",expandedRowRender:this.expandedRowRender,loading:l,dataSource:r,rowKey:"id",onChange:this.handleStandardTableChange,pagination:c})))}}]),t}(B.PureComponent),L=R))||L)||L),D=A;t.default=D}}]);