(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{"5opg":function(e,a,t){"use strict";var l=t("TqRt"),r=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=l(t("pVnL"));t("IzEo");var s=l(t("bx4M"));t("g9YV");var o=l(t("wCAj"));t("+L6B");var d=l(t("2/Rp"));t("/zsF");var n=l(t("PArb"));t("miYZ");var p=l(t("tsqr")),u=l(t("MVZn")),m=l(t("lwsE")),f=l(t("W8MJ")),c=l(t("a1gu")),h=l(t("Nsbk")),E=l(t("7W2i"));t("2qtc");var b=l(t("kLXV"));t("5NDa");var g=l(t("5rEg"));t("nRaC");var y=l(t("5RzL"));t("OaEy");var M=l(t("2fM7"));t("y8nQ");var v,V,w,C,D,T,k,F=l(t("Vl3Y")),q=r(t("q1tI")),P=t("MuoO"),U=t("LLXN"),N=l(t("zHco")),O=l(t("UwRH")),x=F.default.Item,I=M.default.Option,L=F.default.create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,r=e.handleModalVisible,i=e.permission,s=i;s.push({id:0,value:0,title:"\u9876\u5c42\u8d44\u6e90"});var o=function(){t.validateFields(function(e,a){e||(t.resetFields(),console.log(a),l(a))})};return q.default.createElement(b.default,{destroyOnClose:!0,title:(0,U.formatMessage)({id:"app.form.create.title"}),visible:a,onOk:o,onCancel:function(){return r()}},q.default.createElement(x,{labelCol:{span:6},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.superior"})},t.getFieldDecorator("parentId",{initialValue:"0"})(q.default.createElement(y.default,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:s,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u8d44\u6e90"}))),q.default.createElement(x,{labelCol:{span:6},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.resourceName"})},t.getFieldDecorator("resName",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u56db\u4e2a\u5b57\u7b26\u7684\u8d44\u6e90\u540d\u79f0\uff01",min:4}]})(q.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),q.default.createElement(x,{labelCol:{span:6},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.type"})},t.getFieldDecorator("resType",{initialValue:"url"})(q.default.createElement(M.default,{style:{width:"100%"}},q.default.createElement(I,{value:"url"},"url"),q.default.createElement(I,{value:"data"},"data")))),q.default.createElement(x,{labelCol:{span:6},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.authorityValue"})},t.getFieldDecorator("permission",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u56db\u4e2a\u5b57\u7b26\u7684\u6743\u9650\u503c\uff01",min:4}]})(q.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),q.default.createElement(x,{labelCol:{span:6},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.url"})},t.getFieldDecorator("url",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u56db\u4e2a\u5b57\u7b26\u7684\u63a5\u53e3\uff01",min:4}]})(q.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),q.default.createElement(x,{labelCol:{span:6},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.requestMethod"})},t.getFieldDecorator("requestMethod",{initialValue:"GET"})(q.default.createElement(M.default,{style:{width:"100%"}},q.default.createElement(I,{value:"GET"},"GET"),q.default.createElement(I,{value:"POST"},"POST"),q.default.createElement(I,{value:"PUT"},"PUT"),q.default.createElement(I,{value:"DELETE"},"DELETE")))))}),R=(v=F.default.create(),v((w=function(e){function a(e){var t;return(0,m.default)(this,a),t=(0,c.default)(this,(0,h.default)(a).call(this,e)),t.renderContent=function(){var e=t.props,a=e.form,l=e.values,r=e.permission;return[q.default.createElement(x,{key:"id"},a.getFieldDecorator("id",{initialValue:l.id})(q.default.createElement(g.default,{type:"hidden"}))),q.default.createElement(x,{key:"parentId",labelCol:{span:5},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.superior"})},a.getFieldDecorator("parentId",{initialValue:l.parentId})(q.default.createElement(y.default,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:r,placeholder:"\u8bf7\u9009\u62e9\u4e0a\u7ea7\u8d44\u6e90"}))),q.default.createElement(x,{key:"resName",labelCol:{span:5},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.resourceName"})},a.getFieldDecorator("resName",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u56db\u4e2a\u5b57\u7b26\u7684\u8d44\u6e90\u540d\u79f0\uff01",min:4}],initialValue:l.resName})(q.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),q.default.createElement(x,{key:"resType",labelCol:{span:5},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.type"})},a.getFieldDecorator("resType",{initialValue:l.resType})(q.default.createElement(M.default,{style:{width:"100%"}},q.default.createElement(I,{value:"url"},"url"),q.default.createElement(I,{value:"data"},"data")))),q.default.createElement(x,{key:"permission",labelCol:{span:5},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.authorityValue"})},a.getFieldDecorator("permission",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u56db\u4e2a\u5b57\u7b26\u7684\u6743\u9650\u503c\uff01",min:4}],initialValue:l.permission})(q.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),q.default.createElement(x,{key:"url",labelCol:{span:5},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.url"})},a.getFieldDecorator("url",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u81f3\u5c11\u56db\u4e2a\u5b57\u7b26\u7684\u63a5\u53e3\uff01",min:4}],initialValue:l.url})(q.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),q.default.createElement(x,{labelCol:{span:5},wrapperCol:{span:15},label:(0,U.formatMessage)({id:"app.permission.form.requestMethod"})},a.getFieldDecorator("requestMethod",{initialValue:l.requestMethod})(q.default.createElement(M.default,{style:{width:"100%"}},q.default.createElement(I,{value:"GET"},"GET"),q.default.createElement(I,{value:"POST"},"POST"),q.default.createElement(I,{value:"PUT"},"PUT"),q.default.createElement(I,{value:"DELETE"},"DELETE"))))]},t}return(0,E.default)(a,e),(0,f.default)(a,[{key:"render",value:function(){var e=this.props,a=e.updateModalVisible,t=e.handleUpdateModalVisible,l=e.form,r=e.handleUpdate,i=function(){l.validateFields(function(e,a){e||(l.resetFields(),r(a))})};return q.default.createElement(b.default,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:(0,U.formatMessage)({id:"app.permission.form.operation.deploy.title"}),visible:a,onOk:i,onCancel:function(){return t()}},this.renderContent())}}]),a}(q.PureComponent),V=w))||V),S=(C=(0,P.connect)(function(e){var a=e.permission,t=e.loading;return{permission:a,loading:t.models.permission}}),D=F.default.create(),C(T=D((k=function(e){function a(){var e,t;(0,m.default)(this,a);for(var l=arguments.length,r=new Array(l),i=0;i<l;i++)r[i]=arguments[i];return t=(0,c.default)(this,(e=(0,h.default)(a)).call.apply(e,[this].concat(r))),t.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{}},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e,stepFormValues:a||{}})},t.handleFetch=function(){var e=t.props.dispatch;e({type:"permission/getPermissionTree"})},t.handleReloadData=function(){t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.handleFetch()},1e3)},t.handleAdd=function(e){var a=t.props.dispatch;a({type:"permission/addPermission",payload:(0,u.default)({},e)}),p.default.success((0,U.formatMessage)({id:"app.form.create.successMessage"})),t.handleModalVisible(),t.handleReloadData()},t.handleUpdate=function(e){var a=t.props.dispatch;a({type:"permission/updatePermission",payload:(0,u.default)({},e)}),p.default.success((0,U.formatMessage)({id:"app.form.operation.deploy.success"})),t.handleUpdateModalVisible(),t.handleReloadData()},t.handleDelete=function(e){var a=t.props.dispatch;a({type:"permission/deletePermission",payload:e.id}),p.default.success((0,U.formatMessage)({id:"app.form.operation.delete.success"})),t.handleReloadData()},t}return(0,E.default)(a,e),(0,f.default)(a,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"render",value:function(){var e=this,a=this.state,t=a.modalVisible,l=a.updateModalVisible,r=a.stepFormValues,p=this.props.permission,u=p.permission.result,m={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},f={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},c=[{title:(0,U.formatMessage)({id:"app.permission.form.resourceName"}),dataIndex:"resName",key:"name"},{title:(0,U.formatMessage)({id:"app.permission.form.type"}),dataIndex:"resType",key:"resType",width:"12%"},{title:(0,U.formatMessage)({id:"app.permission.form.authorityValue"}),dataIndex:"permission",width:"15%",key:"permission"},{title:(0,U.formatMessage)({id:"app.permission.form.url"}),dataIndex:"url",width:"15%",key:"url"},{title:(0,U.formatMessage)({id:"app.permission.form.requestMethod"}),dataIndex:"requestMethod",width:"12%",key:"requestMethod"},{title:(0,U.formatMessage)({id:"app.form.operation"}),key:"operation",render:function(a){return q.default.createElement("span",{className:"table-operation"},q.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},(0,U.formatMessage)({id:"app.form.operation.deploy"})),q.default.createElement(n.default,{type:"vertical"}),q.default.createElement("a",{onClick:function(){return e.handleDelete(a)}},(0,U.formatMessage)({id:"app.form.delete"})))}}],h=[];for(var E in u){var b=u[E];for(var g in b)h.push(b[g])}return q.default.createElement(N.default,{title:(0,U.formatMessage)({id:"app.permission"})},q.default.createElement(s.default,{bordered:!1},q.default.createElement("div",{className:O.default.tableList},q.default.createElement("div",{className:O.default.tableListOperator},q.default.createElement(d.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},(0,U.formatMessage)({id:"app.form.create"}))),q.default.createElement(o.default,{columns:c,dataSource:h,rowKey:"id"}),",")),q.default.createElement(L,(0,i.default)({},m,{modalVisible:t,permission:h})),r&&Object.keys(r).length?q.default.createElement(R,(0,i.default)({},f,{updateModalVisible:l,values:r,permission:h})):null)}}]),a}(q.PureComponent),T=k))||T)||T),A=S;a.default=A}}]);