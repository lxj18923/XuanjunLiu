(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{HKi4:function(e,a,t){"use strict";var l=t("TqRt"),r=t("284h");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=l(t("pVnL"));t("IzEo");var d=l(t("bx4M"));t("lUTK");var o=l(t("BvKs"));t("14J3");var s=l(t("BMrR"));t("Pwec");var i=l(t("CtXQ"));t("+L6B");var u=l(t("2/Rp"));t("jCWc");var f=l(t("kPKH"));t("miYZ");var p=l(t("tsqr")),c=l(t("MVZn"));t("/zsF");var m=l(t("PArb"));t("2qtc");var h=l(t("kLXV"));t("5NDa");var g=l(t("5rEg")),y=l(t("lwsE")),v=l(t("W8MJ")),b=l(t("a1gu")),E=l(t("Nsbk")),M=l(t("7W2i"));t("OaEy");var C=l(t("2fM7"));t("y8nQ");var k,w,V,F,D,I,R,S,x,N,O,L,j=l(t("Vl3Y")),U=r(t("q1tI")),A=t("MuoO"),z=t("LLXN"),B=l(t("CkN6")),P=l(t("zHco")),T=l(t("lcRg")),q=(l(t("ZXe0")),j.default.Item),K=C.default.Option,J=(k=(0,A.connect)(function(e){var a=e.user,t=e.loading;return{user:a,loading:t.models.user}}),w=j.default.create(),k(V=w((F=function(e){function a(){var e,t;(0,y.default)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=(0,b.default)(this,(e=(0,E.default)(a)).call.apply(e,[this].concat(r))),t.renderContent=function(){var e=t.props,a=e.form,l=e.user.roles,r={};null!=l&&(r=l.result);var n=[];for(var d in r)n.push(U.default.createElement(K,{key:r[d].id,value:r[d].id},r[d].name));return[U.default.createElement(q,{key:"name",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.loginName"})},a.getFieldDecorator("name",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0\uff01",min:11}]})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"password",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.password"})},a.getFieldDecorator("password",{})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"stuName",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.name"})},a.getFieldDecorator("stuName",{})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"stuId",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.studentId"})},a.getFieldDecorator("stuId",{})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"major",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.major"})},a.getFieldDecorator("major",{})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"})))]},t}return(0,M.default)(a,e),(0,v.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"user/getRoles"})}},{key:"render",value:function(){var e=this.props,a=e.modalVisible,t=e.handleModalVisible,l=e.form,r=e.handleAdd,n=function(){l.validateFields(function(e,a){e||(l.resetFields(),r(a))})};return U.default.createElement(h.default,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:(0,z.formatMessage)({id:"app.info.form.create.title"}),visible:a,onOk:n,onCancel:function(){return t()}},this.renderContent())}}]),a}(U.PureComponent),V=F))||V)||V),X=(D=(0,A.connect)(function(e){var a=e.user,t=e.loading;return{user:a,loading:t.models.user}}),I=j.default.create(),D(R=I((S=function(e){function a(){var e,t;(0,y.default)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=(0,b.default)(this,(e=(0,E.default)(a)).call.apply(e,[this].concat(r))),t.renderContent=function(){var e=t.props,a=e.form,l=e.values;return[U.default.createElement(q,{key:"id"},a.getFieldDecorator("id",{initialValue:l.id})(U.default.createElement(g.default,{type:"hidden",placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"name",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.loginName"})},a.getFieldDecorator("name",{roles:[{required:!0,message:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d\u79f0\uff01",min:11}],initialValue:l.name})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"password",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.password"})},a.getFieldDecorator("password",{})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"stuName",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.name"})},a.getFieldDecorator("stuName",{initialValue:l.stuName})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"stuId",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.studentId"})},a.getFieldDecorator("stuId",{initialValue:l.stuId})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"major",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.major"})},a.getFieldDecorator("major",{initialValue:l.major})(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),U.default.createElement(q,{key:"language",labelCol:{span:5},wrapperCol:{span:15},label:(0,z.formatMessage)({id:"app.info.form.language"})},a.getFieldDecorator("language",{initialValue:l.language})(U.default.createElement(C.default,{style:{width:"100%"}},U.default.createElement(C.default.Option,{value:"\u7e41\u4f53"},"\u7e41\u4f53"),U.default.createElement(C.default.Option,{value:"\u7b80\u4f53"},"\u7b80\u4f53"),U.default.createElement(C.default.Option,{value:"\u82f1\u6587"},"\u82f1\u6587"))))]},t}return(0,M.default)(a,e),(0,v.default)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.dispatch,t=e.values;a({type:"user/getUserById",payload:t.id})}},{key:"render",value:function(){var e=this.props,a=e.updateModalVisible,t=e.handleUpdateModalVisible,l=e.form,r=e.handleUpdate,n=function(){l.validateFields(function(e,a){e||(l.resetFields(),r(a))})};return U.default.createElement(h.default,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:(0,z.formatMessage)({id:"app.info.form.operation.deploy.title"}),visible:a,onCancel:function(){return t()},onOk:n},this.renderContent())}}]),a}(U.PureComponent),R=S))||R)||R),H=(x=(0,A.connect)(function(e){var a=e.user,t=e.loading;return{user:a,loading:t.models.user}}),N=j.default.create(),x(O=N((L=function(e){function a(){var e,t;(0,y.default)(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=(0,b.default)(this,(e=(0,E.default)(a)).call.apply(e,[this].concat(r))),t.state={modalVisible:!1,updateModalVisible:!1,expandForm:!1,selectedRows:[],formValues:{},stepFormValues:{}},t.columns=[{title:(0,z.formatMessage)({id:"app.info.form.userId"}),dataIndex:"id"},{title:(0,z.formatMessage)({id:"app.info.form.loginName"}),dataIndex:"name"},{title:(0,z.formatMessage)({id:"app.info.form.language"}),dataIndex:"language"},{title:(0,z.formatMessage)({id:"app.info.form.name"}),dataIndex:"stuName"},{title:(0,z.formatMessage)({id:"app.info.form.studentId"}),dataIndex:"stuId"},{title:(0,z.formatMessage)({id:"app.info.form.major"}),dataIndex:"major"},{title:(0,z.formatMessage)({id:"app.form.operation"}),render:function(e,a){return U.default.createElement(U.Fragment,null,U.default.createElement("a",{onClick:function(){return t.handleUpdateModalVisible(!0,a)}},(0,z.formatMessage)({id:"app.form.operation.deploy"})),U.default.createElement(m.default,{type:"vertical"}),U.default.createElement("a",{onClick:function(){return t.handleDelete(a)}},(0,z.formatMessage)({id:"app.form.delete"})))}}],t.handleStandardTableChange=function(e,a,l){var r=t.props.dispatch,n={pageNum:e.current,pageSize:e.pageSize};r({type:"user/fetch",payload:n})},t.handleFormReset=function(){var e=t.props,a=e.form,l=e.dispatch;a.resetFields(),t.setState({formValues:{}}),l({type:"user/fetch",payload:{}})},t.toggleForm=function(){var e=t.state.expandForm;t.setState({expandForm:!e})},t.handleMenuClick=function(e){var a=t.props.dispatch,l=t.state.selectedRows;if(l)switch(e.key){case"remove":a({type:"user/remove",payload:{key:l.map(function(e){return e.key})},callback:function(){t.setState({selectedRows:[]})}});break;default:break}},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props,l=a.dispatch,r=a.form;r.validateFields(function(e,a){if(!e){var r=(0,c.default)({},a,{updatedAt:a.updatedAt&&a.updatedAt.valueOf()});t.setState({formValues:r}),l({type:"user/fetch",payload:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e,a){t.setState({updateModalVisible:!!e,stepFormValues:a||{}})},t.handleFetch=function(){var e=t.props.dispatch;e({type:"user/fetch",payload:{}})},t.handleReloadData=function(){t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.handleFetch()},1e3)},t.handleAdd=function(e){var a=t.props.dispatch;a({type:"user/add",payload:e}),p.default.success((0,z.formatMessage)({id:"app.form.create.successMessage"})),t.handleModalVisible(),t.handleReloadData()},t.handleUpdate=function(e){var a=t.props.dispatch;a({type:"user/update",payload:e}),p.default.success((0,z.formatMessage)({id:"app.form.operation.deploy.success"})),t.handleUpdateModalVisible(),t.handleReloadData()},t.handleDelete=function(e){var a=t.props.dispatch;a({type:"user/delete",payload:e.id}),p.default.success((0,z.formatMessage)({id:"app.form.operation.delete.success"})),t.handleReloadData()},t}return(0,M.default)(a,e),(0,v.default)(a,[{key:"componentDidMount",value:function(){this.handleFetch()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return U.default.createElement(j.default,{onSubmit:this.handleSearch,layout:"inline"},U.default.createElement(s.default,{gutter:{md:8,lg:24,xl:48}},U.default.createElement(f.default,{md:8,sm:24},U.default.createElement(q,{label:"\u7528\u6237\u540d\u79f0"},e("name")(U.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"})))),U.default.createElement(f.default,{md:8,sm:24},U.default.createElement(q,{label:"\u7528\u6237\u7c7b\u578b"},e("type")(U.default.createElement(C.default,{placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"}},U.default.createElement(K,{value:"0"},"\u5173\u95ed"),U.default.createElement(K,{value:"1"},"\u8fd0\u884c\u4e2d"))))),U.default.createElement(f.default,{md:8,sm:24},U.default.createElement("span",{className:T.default.submitButtons},U.default.createElement(u.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),U.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),U.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u5c55\u5f00 ",U.default.createElement(i.default,{type:"down"}))))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.user.users,l=a.loading,r=[];null!=t.result&&(r["list"]=t.result.records,r["pagination"]={current:t.result.current,pageSize:t.result.size,total:t.result.total});var s=this.state,i=s.selectedRows,f=s.modalVisible,p=s.updateModalVisible,c=s.stepFormValues,m=(U.default.createElement(o.default,{onClick:this.handleMenuClick,selectedKeys:[]},U.default.createElement(o.default.Item,{key:"remove"},"\u5220\u9664"),U.default.createElement(o.default.Item,{key:"approval"},"\u6279\u91cf\u5ba1\u6279")),{handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible}),h={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate};return U.default.createElement(P.default,{title:(0,z.formatMessage)({id:"app.info"})},U.default.createElement(d.default,{bordered:!1},U.default.createElement("div",{className:T.default.tableList},U.default.createElement("div",{className:T.default.tableListOperator},U.default.createElement(u.default,{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},(0,z.formatMessage)({id:"app.form.create"}))),U.default.createElement(B.default,{selectedRows:i,loading:l,data:r,columns:this.columns,rowKey:"id",onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),U.default.createElement(J,(0,n.default)({},m,{modalVisible:f})),c&&Object.keys(c).length?U.default.createElement(X,(0,n.default)({},h,{updateModalVisible:p,values:c})):null)}}]),a}(U.PureComponent),O=L))||O)||O),W=H;a.default=W},lcRg:function(e,a,t){e.exports={tableList:"antd-pro\\pages\\-management\\user\\info-tableList",tableListOperator:"antd-pro\\pages\\-management\\user\\info-tableListOperator",tableListForm:"antd-pro\\pages\\-management\\user\\info-tableListForm",submitButtons:"antd-pro\\pages\\-management\\user\\info-submitButtons"}}}]);